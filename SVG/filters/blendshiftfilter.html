<!-- https://bkimmel.github.io/ -->
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Sample</title>
        <meta name="description" content="Sample page">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
			svg {
				display: block;
				width: 50%;
				height: 40vh;
				outline: 1px solid red;
				margin: 20px auto;
			}

        </style>
        
    </head>
    <body>
         <style>
			.filtertest.greenscreen2 rect {
				fill: url(#greengrad);
				stroke: rgb(0,0,0);
				stroke-width: 5px;
				filter: url(#shift);
			}
    	</style>
        <svg class="filtertest greenscreen2" viewBox="0 0 100 100"  preserveAspectRatio="xMidYMid meet">
        	<defs>
        		<linearGradient id="greengrad"
								x1="0%" y1="0%"
								x2="100%" y2="0%"
								gradientUnits="objectBoundingBox">
				  <stop offset="0%"   stop-color="#000000" stop-opacity="1"/>
				  <stop offset="100%" stop-color="#00FF00" stop-opacity="1"/>
				</linearGradient>
				<filter id="hold">
					 
				</filter>
        		<filter id="shift">
        			
        			 
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 2 0 0 -1"
					   in="SourceGraphic" result="GREENGREATERTHAN" />
					  <!-- 2 = 1 / .5 -->
					 <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="GREENGREATERTHAN" result="ALPHA_EQ"  />
					  <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 -1.818 0 1 0"
					   in="ALPHA_EQ" result="LINE"  />
					   <!-- 1.818 = 1 / .55 -->
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="LINE" result="TRANS1"  />
					   <fecomponenttransfer in="TRANS1" result="STANCHEON1">
							<fefunca class="alphatrans" type="linear" slope="1" intercept="0" />
					   </fecomponenttransfer>

					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 2.0618 0 0 -1"
					   in="SourceGraphic" result="GREENGREATERTHAN2" />
					  
					 <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="GREENGREATERTHAN2" result="ALPHA_EQ2"  />

					  <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 -1.85 0 1 0"
					   in="ALPHA_EQ2" result="LINE2"  />
					   
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 .1,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="LINE2" result="TRANS2"  />
					   <fecomponenttransfer in="TRANS2" result="STANCHEON2">
							<fefunca class="alphatrans" type="linear" slope="1" intercept="0" />
					   </fecomponenttransfer>

					  <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 2.223 0 0 -1"
					   in="SourceGraphic" result="GREENGREATERTHAN3" />
					  
					 <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="GREENGREATERTHAN3" result="ALPHA_EQ3"  />

					  <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 -2.08333 0 1 0"
					   in="ALPHA_EQ3" result="LINE3"  />
					   
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 .1,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="LINE3" result="TRANS3"  />
					   <fecomponenttransfer in="TRANS3" result="STANCHEON3">
							<fefunca class="alphatrans" type="linear" slope="1" intercept="0" />
					   </fecomponenttransfer>

					    <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 2.223 0 0 -1"
					   in="SourceGraphic" result="GREENGREATERTHAN4" />
					  
					 <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="GREENGREATERTHAN4" result="ALPHA_EQ4"  />

					  <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 -2.48333 0 1 0"
					   in="ALPHA_EQ4" result="LINE4"  />
					   
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 .1,
					   0 0 0 0 0,
					   0 0 0 100 0"
					   in="LINE4" result="TRANS4"  />
					   <fecomponenttransfer in="TRANS4" result="STANCHEON4">
							<fefunca class="alphatrans" type="linear" slope="1" intercept="0" />
					   </fecomponenttransfer>
						
						<feMerge id="pilein" result="OVERMERGE">
					   	 <feMergeNode  in="SourceGraphic"/>
					   	 <feMergeNode  in="STANCHEON4"/>
					   	 <feMergeNode  in="STANCHEON3"/>
						 <feMergeNode  in="STANCHEON2"/>
						 <feMergeNode  in="STANCHEON1"/> 
						</feMerge>

						<feComposite operator="arithmetic" in2="SourceGraphic" in="OVERMERGE" k1="0" k2="1" k3=".75" k4="0" />
						
						<!--
						<feComposite result="COMPA" operator="arithmetic" in="STANCHEON2" in2="STANCHEON1" k1="0" k2=".5" k3=".5" k4="0" />
						<feComposite result="COMPB" operator="arithmetic" in="STANCHEON3" in2="COMPA" k1="0" k2=".5" k3=".5" k4="0" />
						<feComposite result="COMPC" operator="arithmetic" in="STANCHEON4" in2="COMPB" k1="0" k2=".5" k3=".5" k4="0" />
						<feComposite operator="over" in2="SourceGraphic" in="COMPC" k1="0" k2=".5" k3=".5" k4="0" />
					   


						 
						  <feMergeNode in="STANCHEON3"/>
						  <feMergeNode in="STANCHEON2"/>
						  <feMergeNode in="STANCHEON1"/>
						  <feMergeNode in="SourceGraphic"/>
						  -->

						<!--
					   <feComposite in="STANCHEON1" in2="STANCHEON2" operator="arithmetic" k1="0" k2=".1" k3="1" k4="0" />
					   

					  
					  
					<fecomponenttransfer in="GREENGREATERTHAN" result="ALPHAUP">
        				<fefuncr type="identity" />
					   	<fefuncg type="identity"/>
					   	<fefuncb type="identity" />
						<fefunca type="linear" slope="255" intercept="0" />
					 </fecomponenttransfer>

				   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 -80 0 1 0"
					   in="GREENGREATERTHAN" result="GREENBETWEEN"  />

					   
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 0 0 50 0"
					   in="LOWGREEN" result="AMP" />
					   
					   <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 1.1 0 0 -.4"
					   in="LOWGREEN" result="MIDDLE_GREEN" />
						
					   <feflood flood-color="black" flood-opacity="1" result="BLACK" />
					   <feComposite operator="in" in="BLACK" in2="MIDDLE_GREEN" result="STANCHEON1"/>
						
					   
        			<fecomponenttransfer in="ISOLATEGREEN" result="UPGREEN">
					   	<fefuncg type="linear" slope="1" intercept=".6" />
						<fefunca type="identity" />
					 </fecomponenttransfer>

					 <feColorMatrix type="matrix" values=
					  "0 0 0 0 0,
					   0 1 0 0 0,
					   0 0 0 0 0,
					   0 1 0 0 0"
					   in="SourceGraphic" result="FLIPGREEN" />
					 
						
						-->
        		</filter>
        	</defs>
        	<rect x="10" y="10" width="80" height="80"  />
        </svg>
        <style>
        .filtercircle circle {
				fill: url(#radial);
				stroke: rgb(0,0,0);
				stroke-width: 5px;
				filter: url(#shift);
			}
		</style>
		<svg class="filtercircle" viewBox="0 0 100 100"  preserveAspectRatio="xMidYMid meet">
			<defs>
			 	<radialGradient id="radial"
				   fx="5%" fy="5%" r="80%"
				   spreadMethod="pad"
				   gradientUnits="objectBoundingBox" >
				  <stop offset="0%"   stop-color="#000000" stop-opacity="1"/>
				  <stop offset="100%" stop-color="#00FF00" stop-opacity="1" />
				</radialGradient>
			</defs>
			<circle cx="50" cy="50" r="40"  />
		</svg>
		 <style>
        .filterimage image {
				
				stroke: rgb(0,0,0);
				stroke-width: 5px;
				filter: url(#shift);
			}
		</style>
		<svg style="width: 90%; height: 65vh;" class="filterimage" viewBox="0 0 100 100"  preserveAspectRatio="xMidYMid meet">
		  <image x="0" y="0" width="100" height="100" xlink:href="http://assets.worldwildlife.org/photos/3825/images/original/shutterstock_12730534.jpg" />
        </svg>
        <style>
        .filterimage2 image {
				
				stroke: rgb(0,0,0);
				stroke-width: 5px;
				
			}

		.filterimage2 .topimg {
				
				stroke: rgb(0,0,0);
				stroke-width: 5px;
				mask: url(#qtrmask);
				filter: url(#maskfilter);
			}
		
		</style>
        <svg style="width: 90%; height: 65vh;" class="filterimage2" viewBox="0 0 100 100"  preserveAspectRatio="xMidYMid meet">
          <defs>
           <filter id="maskfilter">
				<fecomponenttransfer in="GREENGREATERTHAN" result="ALPHAUP">
        				<fefuncr type="identity" />
					   	<fefuncg type="linear" slope="2" intercept="0" />
					   	<fefuncb type="identity" />
						<fefunca type="identity" />
					 </fecomponenttransfer>
           </filter>
           <mask id="qtrmask">
           	  <rect x="0" y="0" width="25" height="100" fill="rgb(0,0,0)" />
           	  <rect x="25" y="0" width="25" height="100" fill="rgb(255,255,255)" />
           	  <rect x="50" y="0" width="25" height="100" fill="rgb(0,0,0)" />
           	  <rect x="75" y="0" width="25" height="100" fill="rgb(255,255,255)" />
           </mask>
          </defs>
		  <image x="0" y="0" width="100" height="100" xlink:href="http://assets.worldwildlife.org/photos/3825/images/original/shutterstock_12730534.jpg" />
		  <image class="topimg" x="0" y="0" width="100" height="100" xlink:href="http://assets.worldwildlife.org/photos/3825/images/original/shutterstock_12730534.jpg" />
        </svg>
        <script>
			function animatefilters() {
				var alphas = Array.prototype.slice.call( document.querySelectorAll('.alphatrans') );
				var _n = Date.now();

				function filterstep(offst, el) {
					var t = Date.now();
					var pct = ( t - _n ) / 1000;
					var trace = ( 1 + Math.cos( ( ( Math.PI * pct ) + offst ) ) ) / 2;
					el.setAttribute('slope', trace);
					requestAnimationFrame(function(){ filterstep(offst, el) });
				}

				alphas.forEach(function(v,i){
					requestAnimationFrame(function(){ filterstep(.25 * i * Math.PI, v) });
				});
}
        </script>
	</body>
</html>
